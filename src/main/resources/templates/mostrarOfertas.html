<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head th:fragment="head">
    <title>Conecta2</title>
    <!-- Required meta tags -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous" />
    
    <!-- Style CSS -->
    <link href="../css/style.css" rel="stylesheet" />
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>
  <body>
  	<nav th:replace="fragments/navbar :: navbar"></nav>
  	
  	
  	
  	
  	<!--  EMPRESA -->
  	<div th:if="${popup == null}">
  	<div th:if="${emp != null}">
  		<div th:replace="fragments/cabecera :: cabecera(titulo='Ofertas')"></div>
  	</div>
  	
  	
  	<div class="row mt-5">  	
  		<div th:if="${emp != null}" class="col-10 color-perfil mx-auto border border-dark rounded container-fondoGris">
  		
	       <div class="row"> 
	        	   <div class="col-11  mx-auto justify-content-between text-right"> 
	        	   
	 	            <a href="/crear-oferta">              
	  	             <i class="material-icons btn botonAzul rounded-circle">add</i>
	  	             </a>
  	            </div>
	        </div> <!-- final row -->
	        <div class="row mt-3">
	       
		        	<div class="col-12 mx-auto table-responsive">
		        	 <ul class="nav nav-pills nav-fill" id="pills-tab" role="tablist">
	       	  	    	<li class="nav-item">
			               <a class="nav-link border active"  id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="true"><span class="">Ofertas Publicadas</span></a>
			           </li>
			           <li class="nav-item">
			               <a class="nav-link border" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="false"><span class="">Ofertas Finalizadas</span></a>
			          </li>
			      </ul>
			      
		      
				  <div class="tab-content mt-4" id="pills-tabContent">
			    		  <div class="tab-pane"  th:classappend="${msg} ? fade : 'show active'" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
			    		     
	 		          	 <table class="table table-hover">
		 		          	 <thead>
		 		          	 	<tr>
		 		          	 		<th class="text-center">Nombre</th>
			  						<th class="text-center">Jornada</th>
			  						<th class="text-center">Contrato</th>
									<th class="text-center">Ciudad</th>
									<th class="text-center">Vacantes</th>
									<th class="text-center">Salario</th>
									<th class="text-center">Inscripciones</th>
									<th class="text-center" colspan="2">Opciones</th>
		 		          	 	</tr>
		 		          	 </thead>
	 		          	     <tbody  >
		 		          	  	<tr class="align-middle" th:each="oferta : ${listaOfertas}">
			  						<td class="text-center" th:text="${oferta.nombre}"></td>
			  						<td class="text-center" th:text="${oferta.JornadaLaboral.displayName}"></td>
			  						<td class="text-center" th:text="${oferta.contrato.displayName}"></td>
									<td class="text-center" th:text="${oferta.ciudad}"></td>
									<td class="text-center" th:text="${oferta.vacantes}"></td>
									<td class="text-center" th:text="${oferta.salario}"></td>
								<td class="text-center" th:text="${oferta.particularesInscritos.size()}"></td>
									<td class="text-center"> 
									 <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="${oferta.id}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
		   								Opciones
		 							 </a>
									 <div class="dropdown-menu" aria-labelledby="${oferta.id}">
									 
									  		  <a class="dropdown-item" th:href="'/verOferta?id=' +${oferta.id}" >Ver Oferta</a>
		  									  <a class="dropdown-item" th:href="'/modificar-oferta?id=' +${oferta.id}">Modificar</a>
		  									  <a class="dropdown-item" th:href="'/avisos?id=' +${oferta.id} + '&tipo=' + eliminar">Eliminar</a>
		  									  <a class="dropdown-item" th:href="'/candidatos?id=' +${oferta.id}">Ver Candidatos</a>
		 									  <a class="dropdown-item" th:href="'/avisos?id=' +${oferta.id} + '&tipo=' + finalizar"">Finalizar</a>
		 							 </div>
									</td>
	      						</tr>
	 		             	</tbody>
 		          	   </table>
 		             </div><!-- final tab-pane -->
 		        		
 		        		
 		        		 <div class="tab-pane fade" th:classappend="${msg} ? 'show active' : fade"  id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
 		        		  
 		        		  <table class="table table-hover">
		 		          	 <thead>
		 		          	 	<tr>
		 		          	 		<th class="text-center">Nombre</th>
			  						<th class="text-center">Jornada</th>
			  						<th class="text-center">Contrato</th>
									<th class="text-center">Ciudad</th>
									<th class="text-center">Vacantes</th>
									<th class="text-center">Salario</th>
									<th class="text-center">Inscripciones</th>
									<th class="text-center" colspan="2">Opciones</th>
		 		          	 	</tr>
		 		          	 </thead>
	 		          	     <tbody  >
		 		          	  	<tr class="align-middle" th:each="oferta : ${listaOfertasFinalizadas}">
			  						<td class="text-center" th:text="${oferta.nombre}"></td>
			  						<td class="text-center" th:text="${oferta.JornadaLaboral.displayName}"></td>
			  						<td class="text-center" th:text="${oferta.contrato.displayName}"></td>
									<td class="text-center" th:text="${oferta.ciudad}"></td>
									<td class="text-center" th:text="${oferta.vacantes}"></td>
									<td class="text-center" th:text="${oferta.salario}"></td>
								 <td class="text-center" th:text="${oferta.particularesInscritos.size()}"></td>
									<td class="text-center"> 
									 <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="${oferta.id}" data-toggle="dropdown" aria-haspopup="flase" aria-expanded="true">
		   								Opciones
		 							 </a>
									 <div class="dropdown-menu" aria-labelledby="${oferta.id}">
									 
									  		  <a class="dropdown-item" th:href="'/verOferta?id=' +${oferta.id}" >Ver Oferta</a>
		  									  <a class="dropdown-item" th:href="'/candidatos?id=' +${oferta.id}">Ver Candidatos</a>
		 									 <a class="dropdown-item" th:href="'/eliminarOferta?id=' +${oferta.id}">Eliminar</a>
		 							 </div>
									</td>
	      						</tr>
	 		             	</tbody>
 		          	   </table>
 		        		  
 		        		 </div>
 		        </div>  <!-- final tab content -->
 		        
 		        
	        </div> 	 <!--  final row mt-5 -->  
  	    </div><!--  final emp!=null -->
  	    </div><!-- final row mt-5 -->
  	    </div>
  	    
  	    <!-- PARTICULARES -->
  	    
  	  	<div th:if="${par != null}">
  	  		<div th:replace="fragments/cabecera :: cabecera(titulo='Ofertas Inscritas')"></div>

  	    <div class="row mt-5">
  	    <div class="col-10 color-perfil mx-auto border border-dark rounded text-center container-fondoGris">
  	   
  	    <div class="row mt-5 ">
  	    	<div class="col-12 mx-auto table-responsive">
 		          	 <table class="table table-hover">
 		          	 <thead>
 		          	 	<tr>
 		          	 		<th class="text-center">Nombre</th>
	  						<th class="text-center">Jornada</th>
	  						<th class="text-center">Contrato</th>
							<th class="text-center">Ciudad</th>
							<th class="text-center">Vacantes</th>
							<th class="text-center">Salario</th>
							<th class="text-center">Inscripciones</th>
							<th class="text-center">Opciones</th>
 		          	 	</tr>
 		          	 </thead>
 		          	 <tbody  >
 		          	  	<tr th:each="oferta : ${listaOfertas}">
	  						<td class="text-center" th:text="${oferta.nombre}"></td>
	  						<td class="text-center" th:text="${oferta.JornadaLaboral.displayName}"></td>
	  						<td class="text-center" th:text="${oferta.contrato.displayName}"></td>
							<td class="text-center" th:text="${oferta.ciudad}"></td>
							<td class="text-center" th:text="${oferta.vacantes}"></td>
							<td class="text-center" th:text="${oferta.salario}"></td>
						<td class="text-center" th:text="${oferta.particularesInscritos.size()}"></td> 
							<td> 
							
							<a th:href="'/verOferta?id=' +${oferta.id}">
				             <input type="button" class="btn botonAzul " value="Ver oferta"></input>							              
				         </a>
							</td>
      					</tr>	
 		          	</tbody>
 		          	</table>
 		          
 		        </div> 
	        </div> 	   
  	    </div>
  	    
  	</div>
  	</div>
  	
  	<!-- BUSCADOR -->
  	<div th:if="${listaOfertasBuscadas != null}">
  		<div th:replace="fragments/cabecera :: cabecera(titulo='BÃºsqueda')"></div>
  	    
  	    <div class="row mt-5">
  	    	<div class="col-10 color-perfil mx-auto border border-dark rounded text-center container-fondoGris">
  	    	<h5 th:if="${listaOfertasBuscadas.size() == 0}" class="my-auto p-5">No se han encontrado ofertas con ese nombre...</h5>
  	   
  	    	<div th:if="${listaOfertasBuscadas.size() &gt; 0}" class="row mt-5">
	             	<div class="col-12 mx-auto table-responsive">
 		          	 <table class="table table-hover">
 		          	 <thead>
 		          	 	<tr>
 		          	 		<th class="text-center">Nombre</th>
	  						<th class="text-center">Jornada</th>
	  						<th class="text-center">Contrato</th>
							<th class="text-center">Ciudad</th>
							<th class="text-center">Vacantes</th>
							<th class="text-center">Salario</th>
							<th class="text-center">Inscripciones</th>
							<th class="text-center" colspan="2">Opciones</th>
 		          	 	</tr>
 		          	 </thead>
 		          	 <tbody>
 		          	  	<tr th:each="oferta : ${listaOfertasBuscadas}">
	  						<td class="text-center" th:text="${oferta.nombre}"></td>
	  						<td class="text-center" th:text="${oferta.JornadaLaboral.displayName}"></td>
	  						<td class="text-center" th:text="${oferta.contrato.displayName}"></td>
							<td class="text-center" th:text="${oferta.ciudad}"></td>
							<td class="text-center" th:text="${oferta.vacantes}"></td>
							<td class="text-center" th:text="${oferta.salario}"></td>
					  		<td class="text-center" th:text="${oferta.particularesInscritos().size()}"></td> 
							<td class="text-center"> 
							 <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="${oferta.id}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
   								Opciones
 							 </a>
							 <div class="dropdown-menu" aria-labelledby="${oferta.id}">
							 	<a class="dropdown-item" th:href="'/verOferta?id=' +${oferta.id}" >Ver Oferta</a>
								<form th:action="@{/inscribir}" method="POST">
									<input type="hidden" name="id_oferta" th:value="${oferta.id}"/>
									<a href='#' onclick='this.parentNode.submit();' class="dropdown-item">Inscribirme</a>
								</form>
 							 </div>
							</td>							
      					</tr>      					
 		          	</tbody>
 		          	</table>
 		        </div> 
	        </div> 	   
  	    </div>  
  	</div>
  	</div>
	</div>
	
	
  	    <!-- Si hay un error -->
	<div th:if="${popup != null}">	
		<div class="modal-dialog">
									    
			 <!-- Modal content-->
			<div class="modal-content">
				<div class="modal-body">
					<label th:text="${popup}"></label>
				</div>
				<div class="modal-footer">
					<a href="/ofertas">
					<button type="button"  class="btn botonAzul">Volver a Ofertas</button> 
					</a>
					
			 	</div>
			</div>
									      
		</div>	
	</div>
	
	
	<!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="/js/jquery-3.2.1.slim.min.js" ></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js" ></script>    

  </body>
</html>